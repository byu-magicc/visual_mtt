<?xml version="1.0" encoding="UTF-8"?>

<launch>

  <arg name="params"            default="default" />
  <arg name="tuning"            default="false" />
  <arg name="imgtopic"          default="/image_raw" />

  <!-- params:            name of .yaml contained the desired parameter values  -->
  <!-- tuning:            enables dynamic reconfigure and displays measurements -->
  <!-- imgtopic:          name of the topic that contains the video             -->

  <!-- ######################################################################## -->

  <!-- load the specified parameters -->
  <rosparam command="load" file="$(find visual_mtt)/param/$(arg params).yaml" />

  <!-- start the visual frontend -->
  <node pkg="visual_mtt" type="visual_frontend" name="visual_frontend" output="screen">
    <param name="tuning" type="bool" value="$(arg tuning)" />
    <remap from="video" to="$(arg imgtopic)" />
  </node>

  <!-- start R-RANSAC -->
  <node pkg="visual_mtt" type="rransac" name="rransac" output="screen">
    <remap from="video" to="$(arg imgtopic)" />
  </node>

  <!-- tuning tools: dynamic reconfigure and track video -->
  <group if="$(arg tuning)">
    <node pkg="rqt_reconfigure" type="rqt_reconfigure" name="dynamic_reconfigure" />
    <node pkg="rqt_image_view" type="rqt_image_view" name="rqt_image_view" />
  </group>

</launch>